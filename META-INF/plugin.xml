<idea-plugin version="2">
    <id>AutoRevert</id>
    <name>AutoRevert</name>
    <version>0.1.1</version>
    <vendor email="dmitry.kandalov [at] gmail.com">Dmitry Kandalov</vendor>
    <category>Misc</category>
    <idea-version since-build="120.0"/>
    <description>
        <![CDATA[<html><body>
Reverts active change list every N minutes:
<ul>
 <li>choose how often to revert changes in "Settings - VCS auto-revert"</li>
 <li>start auto-revert (alt+shift+A)</li>
 <li>work on a feature:
   <ul>
     <li>if your changes auto-reverted before you finish and commit, start over and try making smaller steps;</li>
     <li>if you finish and commit before you run out of time, timer will be reset.</li>
   </ul>
 </li>
 <li>with really small time intervals (like 2 or 5 minutes), there won't be much time to write commit messages. In this case "Quick commit" action can be useful (ctrl+alt+shift+K).</li>
</ul>
<br/>
See https://github.com/dkandalov/auto-revert-plugin for more details.
<br/><br/>
Dedicated to LMAX people.
</body></html>
		]]>
    </description>
    <change-notes>
        <![CDATA[
      <b>0.1.1</b>
      <ul>
        <li>"Disable commits with errors" option</li>
        <li>"Quick commit" action</li>
      </ul>
      <b>0.1.2</b>
      <ul>
        <li>Icons; resetting timer after quick commit</li>
      </ul>
    ]]>
    </change-notes>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.vcs</depends>

    <application-components>
        <component>
            <implementation-class>ru.autorevert.components.AutoRevertAppComponent</implementation-class>
        </component>
        <component>
            <implementation-class>ru.autorevert.components.TimerEventsSourceAppComponent</implementation-class>
        </component>
        <component>
            <implementation-class>ru.autorevert.components.DisableCommitsWithErrorsComponent</implementation-class>
        </component>
    </application-components>

    <project-components>
        <component>
            <implementation-class>ru.autorevert.components.AutoRevertProjectComponent</implementation-class>
        </component>
    </project-components>

    <actions>
        <action id="StartAutoRevert" class="ru.autorevert.components.StartOrStopAutoRevertAction"
                text="Start auto-revert" icon="/icons/rollback.png">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="alt shift a"/>
        </action>
        <action id="QuickCommitAction" class="ru.autorevert.components.QuickCommitAction"
                text="Quick commit" icon="/icons/commit.png">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt shift k"/>
        </action>

        <!-- this action is here only for manual testing -->
<!--
        <action id="RevertCurrentChangeListAction" class="ru.autorevert.components.RevertCurrentChangeListAction" text="Revert change list">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt shift r"/>
        </action>
-->
    </actions>

    <extensions defaultExtensionNs="com.intellij">
        <applicationService serviceInterface="ru.autorevert.settings.Settings" serviceImplementation="ru.autorevert.settings.Settings"/>
    </extensions>
</idea-plugin>